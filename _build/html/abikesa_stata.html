

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title> &#8212; Work Flow</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'abikesa_stata';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Prescriptions" href="act_0/act_0_0/act_0_0_0/act_0_0_0_1.html" />
    <link rel="prev" title="" href="abikesa_python.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="https://github.com/abikesa/abikesa.github.io/blob/main/png/hub_and_spoke.jpg?raw=true" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="https://github.com/abikesa/abikesa.github.io/blob/main/png/hub_and_spoke.jpg?raw=true" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Stata
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="abikesa_r.html"></a></li>

<li class="toctree-l1"><a class="reference internal" href="abikesa_python.html"></a></li>


<li class="toctree-l1 current active"><a class="current reference internal" href="#"></a></li>


<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_0/act_0_0_0_1.html">Prescriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_0/act_0_0_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_0/act_0_0_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_1/act_0_0_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_1/act_0_0_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_0/act_0_0_1/act_0_0_1_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_0/act_0_1_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_0/act_0_1_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_0/act_0_1_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_1/act_0_1_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_1/act_0_1_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_0/act_0_1/act_0_1_1/act_0_1_1_3.html"></a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_0/act_1_0_0_1.html"></a></li>

<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_0/act_1_0_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_0/act_1_0_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_1/act_1_0_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_1/act_1_0_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_0/act_1_0_1/act_1_0_1_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_0/act_1_1_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_0/act_1_1_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_0/act_1_1_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_1/act_1_1_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_1/act_1_1_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_1/act_1_1/act_1_1_1/act_1_1_1_3.html"></a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_0/act_2_0_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_0/act_2_0_0_2.html">.</a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_0/act_2_0_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_1/act_2_0_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_1/act_2_0_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_0/act_2_0_1/act_2_0_1_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_0/act_2_1_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_0/act_2_1_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_0/act_2_1_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_1/act_2_1_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_1/act_2_1_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_2/act_2_1/act_2_1_1/act_2_1_1_3.html"></a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_0/act_3_0_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_0/act_3_0_0_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_0/act_3_0_0_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_1/act_3_0_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_1/act_3_0_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_0/act_3_0_1/act_3_0_1_3.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_1/act_3_1_0/act_3_1_0_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_1/act_3_1_1/act_3_1_1_1.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_1/act_3_1_1/act_3_1_1_2.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="act_3/act_3_1/act_3_1_1/act_3_1_1_3.html"></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/abikesa_stata.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stata">Stata</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-i-basic">Stata I (Basic)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-ii-intermediate">Stata II (Intermediate)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-iii-advanced">Stata III (Advanced)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#just-scored-a-victory-that-carries-profound-implications-for-stata-iii-advanced">Just scored a victory that carries profound implications for “Stata III (Advanced)”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nonparametric">Nonparametric</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#semiparametric">Semiparametric</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="stata">
<h1>Stata<a class="headerlink" href="#stata" title="Permalink to this heading">#</a></h1>
<section id="stata-i-basic">
<h2>Stata I (Basic)<a class="headerlink" href="#stata-i-basic" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Commands, syntax, and file management restricted to Stata dropdown menu, command window, and <code class="docutils literal notranslate"><span class="pre">.do</span></code> files on local computer</p></li>
</ul>
</section>
<section id="stata-ii-intermediate">
<h2>Stata II (Intermediate)<a class="headerlink" href="#stata-ii-intermediate" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>File management including <code class="docutils literal notranslate"><span class="pre">.do</span></code>, <code class="docutils literal notranslate"><span class="pre">.ado</span></code>, and datafiles are managed remotely on GitHub to enhance collaboration, sharing, and openness</p></li>
</ul>
</section>
<section id="stata-iii-advanced">
<h2>Stata III (Advanced)<a class="headerlink" href="#stata-iii-advanced" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Batch mode is used on a <code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">Code</span></code> terminal with <code class="docutils literal notranslate"><span class="pre">.sh</span></code> scripts, with .do files and other outputs embedded in <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> env. Alternatively, <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> codeblocks are used with a Stata kernel, in the same way as is done while running R with an R kernel. This completely mimics the Python environment and Stata and R applications needn’t ever be opened. RMarkdown has absolutely no advanced over a Jupyter book.</p></li>
</ul>
<Details>
   <Summary>Victory! But After 100 Iterations!!</Summary>
<section id="just-scored-a-victory-that-carries-profound-implications-for-stata-iii-advanced">
<h3>Just scored a victory that carries profound implications for “Stata III (Advanced)”<a class="headerlink" href="#just-scored-a-victory-that-carries-profound-implications-for-stata-iii-advanced" title="Permalink to this heading">#</a></h3>
<p>It looks like the Stata kernel (<code class="docutils literal notranslate"><span class="pre">stata</span></code>) is listed as an available kernel, which is a good sign. Since you’re still not seeing it in the kernel selector in VS Code, it might be worth checking the VS Code settings to ensure it’s looking in the correct directory for kernels.</p>
<p>In VS Code, you can check the Jupyter kernel settings by going to the command palette (Ctrl+Shift+P) and searching for “Preferences: Open Settings (UI)”. Then, navigate to the “Python &gt; Jupyter” section and look for the “Jupyter: Kernel Spec Path” setting. Make sure it’s pointing to the correct directory where the Stata kernel is installed (<code class="docutils literal notranslate"><span class="pre">/Users/d/Library/Jupyter/kernels/</span></code> in your case).</p>
<p>If the path is correct and you’re still not seeing the Stata kernel, you might try restarting VS Code again or even restarting your computer to see if that resolves the issue. Sometimes, these changes require a complete restart to take effect.</p>
</Details><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Workflow for Stata III </span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/applications/stata/statamp.app/contents/macos/
stata-mp<span class="w"> </span>-b<span class="w"> </span>work/abikesa_batch.do
</pre></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id2">
<h1><a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h1>
<p>Ah, I see what you’re trying to do. Running Stata in batch mode is a handy way to automate tasks, especially when dealing with large datasets or repetitive tasks.</p>
<p>To run a remote script in batch mode with Stata, you can use the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command to download the script from GitHub and then pass it to Stata for execution. Here’s how you can do it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download the remote script using curl</span>
curl<span class="w"> </span>-O<span class="w"> </span>https://github.com/abikesa/do/raw/main/hello.do

<span class="c1"># Run Stata in batch mode with the downloaded script</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/applications/stata/statamp.app/contents/macos/
stata-mp<span class="w"> </span>-b<span class="w"> </span>hello.do
</pre></div>
</div>
<p>This script will download the <code class="docutils literal notranslate"><span class="pre">hello.do</span></code> script from the GitHub repository and then execute it in batch mode using Stata. Make sure you have <code class="docutils literal notranslate"><span class="pre">curl</span></code> installed on your system, or you can use any other tool to download files from the web.</p>
<p>Running scripts remotely can be a powerful tool, but always ensure you trust the source of the script to avoid any security risks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">display</span> <span class="s">&quot;Hello, Stata!&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hello, Stata!
</pre></div>
</div>
</div>
</div>
<section id="nonparametric">
<h2>Nonparametric<a class="headerlink" href="#nonparametric" title="Permalink to this heading">#</a></h2>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">qui</span> {
<span class="k">capture log close</span> 
<span class="k">log</span> using jamascript<span class="m">.</span>log,<span class="k"> replace</span> 
<span class="k">global</span> repo https:<span class="o">//</span>github<span class="m">.</span>com<span class="o">/</span>muzaale<span class="o">/</span>forum<span class="o">/</span>raw<span class="o">/</span>main<span class="o">/</span> 
<span class="c1">// cls; some commands don&#39;t work outside Stata!!</span>
<span class="cm">/*noi di &quot;What is your work directory?&quot; _request(workdir)</span>
<span class="cm">if &quot;$workdir&quot; == &quot;&quot; {</span>
<span class="cm">	di as err &quot;Please provide your work directory&quot;</span>
<span class="cm">	exit</span>
<span class="cm">}</span>
<span class="cm">else {</span>
<span class="cm">	cd $workdir</span>
<span class="cm">	noi di &quot;jamascript is running ...&quot;</span>
<span class="cm">}</span>
<span class="cm">*/</span>
<span class="k">use</span> <span class="vg">${repo}</span>esrdRisk_t02tT,<span class="k"> clear</span>
<span class="k">tab</span> donor rSMGJcEdF_d
<span class="k">g</span> entry = rSMGJcEdF_t0
<span class="c1">//linkage for donors after 2011 is untrustworthy</span>
<span class="k">replace</span> rSMGJcEdF_d=<span class="m">0</span><span class="k"> if</span> rSMGJcEdF_tT <span class="o">&gt;</span><span class="k"> d</span>(31dec2011)
<span class="k">replace</span> rSMGJcEdF_tT =<span class="k"> d</span>(31dec2011)<span class="k"> if</span> rSMGJcEdF_tT <span class="o">&gt;</span><span class="k"> d</span>(31dec2011)
<span class="c1">//linkage before 1994 is untrustworthy</span>
#delimit ;
<span class="k">replace</span> entry =<span class="k"> d</span>(01jan1994)<span class="k"> if</span>  
    entry <span class="o">&lt;</span><span class="k"> d</span>(01jan1994) <span class="o">&amp;</span>  
	rSMGJcEdF_tT <span class="o">&gt;</span><span class="k"> d</span>(01jan1994); 
<span class="k">stset</span> rSMGJcEdF_tT,  
    origin(rSMGJcEdF_t0)  
	entry(<span class="nv">`entry&#39;</span>)  
	fail(rSMGJcEdF_d<span class="o">==</span><span class="m">2</span>)  
	scale(<span class="m">365.25</span>); 
#delimit cr 
<span class="k">sts list</span>, fail<span class="k"> by</span>(donor) at(<span class="m">5</span> <span class="m">12</span> <span class="m">15</span>) saving(km,<span class="k"> replace</span> ) 
<span class="k">preserve</span>  
<span class="k">    use</span> km,<span class="k"> clear</span>  
<span class="k">	replace</span> failure=failure<span class="o">*</span><span class="m">100</span>
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">1</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">5</span>
<span class="k">	local</span> don5y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">1</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">12</span>
<span class="k">	local</span> don12y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">	sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">1</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">15</span>
<span class="k">	local</span> don15y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
	<span class="c1">//</span>
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">2</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">5</span>
<span class="k">	local</span> hnd5y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">2</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">12</span>
<span class="k">	local</span> hnd12y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">	sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">2</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">15</span>
<span class="k">	local</span> hnd15y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
	<span class="c1">//</span>
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">3</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">5</span>
<span class="k">	local</span> gpop5y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">    sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">3</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">12</span>
<span class="k">	local</span> gpop12y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">	sum</span> failure<span class="k"> if</span> donor<span class="o">==</span><span class="m">3</span> <span class="o">&amp;</span> time<span class="o">==</span><span class="m">15</span>
<span class="k">	local</span> gpop15y:<span class="k"> di</span> <span class="nx">%3.2f</span> <span class="nf">r</span>(mean)
<span class="k">restore</span> 
#delimit ;
<span class="k">sts graph</span>, 
<span class="k">    by</span>(donor)  
    fail 
	per(<span class="m">100</span>)  
	xlab(<span class="m">0</span>(<span class="m">3</span>)<span class="m">15</span>) 
	ylab(<span class="m">0</span>(<span class="m">10</span>)<span class="m">40</span>,  
<span class="k">	    format</span>(<span class="nx">%2.0f</span>))  
	tmax(<span class="m">15</span>)  
	risktable(, color(stc1) group (<span class="m">1</span>)  
<span class="k">	    order</span>(<span class="m">3</span> <span class="s">&quot; &quot;</span> <span class="m">2</span> <span class="s">&quot; &quot;</span> <span class="m">1</span> <span class="s">&quot; &quot;</span>)  
		ti(<span class="s">&quot;#&quot;</span>)  
	) 
	risktable(, color(stc2) group(<span class="m">2</span>))  
	risktable(, color(stc3) group(<span class="m">3</span>))  
	legend(on 
	ring(<span class="m">0</span>)  
	    pos(<span class="m">11</span>)  
<span class="k">	   order</span>(<span class="m">3</span> <span class="m">2</span> <span class="m">1</span>)  
<span class="k">	   lab</span>(<span class="m">3</span> <span class="s">&quot;General population&quot;</span>)  
<span class="k">	   lab</span>(<span class="m">2</span> <span class="s">&quot;Healthy nondonor&quot;</span>)  
<span class="k">	   lab</span>(<span class="m">1</span> <span class="s">&quot;Living donor&quot;</span>)  
	)  
	ti(<span class="s">&quot;Morte&quot;</span>)  
	text(<span class="nv">`don5y&#39;</span> <span class="m">5</span> <span class="s">&quot;</span><span class="nv">`don5y&#39;</span><span class="s">%&quot;</span>, col(stc1))  
	text(<span class="nv">`don12y&#39;</span> <span class="m">12</span> <span class="s">&quot;</span><span class="nv">`don12y&#39;</span><span class="s">%&quot;</span>, col(stc1))  
	text(<span class="nv">`don15y&#39;</span> <span class="m">15</span> <span class="s">&quot;</span><span class="nv">`don15y&#39;</span><span class="s">%&quot;</span>, col(stc1))  
	text(<span class="nv">`hnd5y&#39;</span> <span class="m">5</span> <span class="s">&quot;</span><span class="nv">`hnd5y&#39;</span><span class="s">%&quot;</span>, col(stc2))  
	text(<span class="nv">`hnd12y&#39;</span> <span class="m">12</span> <span class="s">&quot;</span><span class="nv">`hnd12y&#39;</span><span class="s">%&quot;</span>, col(stc2)) 
	text(<span class="nv">`hnd15y&#39;</span> <span class="m">15</span> <span class="s">&quot;</span><span class="nv">`hnd15y&#39;</span><span class="s">%&quot;</span>, col(stc2))  
	text(<span class="nv">`gpop5y&#39;</span> <span class="m">5</span> <span class="s">&quot;</span><span class="nv">`gpop5y&#39;</span><span class="s">%&quot;</span>, col(stc3))  
	text(<span class="nv">`gpop12y&#39;</span> <span class="m">12</span> <span class="s">&quot;</span><span class="nv">`gpop12y&#39;</span><span class="s">%&quot;</span>, col(stc3))  
	text(<span class="nv">`gpop15y&#39;</span> <span class="m">15</span> <span class="s">&quot;</span><span class="nv">`gpop15y&#39;</span><span class="s">%&quot;</span>, col(stc3));
#delimit cr

<span class="k">graph</span> export <span class="o">~/</span>documents<span class="o">/</span>github<span class="o">/</span>work<span class="o">/</span>jamascript<span class="m">.</span>png,<span class="k"> replace</span> 
<span class="k">keep</span> _<span class="o">*</span> entry age_t0 female race donor
<span class="k">rename</span> age_t0 age
<span class="c1">//dataset</span>
<span class="k">save</span> <span class="o">~/</span>documents<span class="o">/</span>github<span class="o">/</span>work<span class="o">/</span>jamascript<span class="m">.</span>dta,<span class="k"> replace</span> 
<span class="k">noi stcox</span> i<span class="m">.</span>donor, basesurv(s0)
<span class="k">noi list</span> s0 _t donor<span class="k"> in</span> <span class="m">1</span><span class="o">/</span><span class="m">10</span>
<span class="k">matrix</span> define b=<span class="nf">e</span>(b)
<span class="k">keep</span> s0 _t 
<span class="c1">//s0</span>
<span class="k">sort</span> _t s0
<span class="k">list in</span> <span class="m">1</span><span class="o">/</span><span class="m">10</span>
<span class="k">save</span> <span class="o">~/</span>documents<span class="o">/</span>github<span class="o">/</span>work<span class="o">/</span>s0<span class="m">.</span>dta,<span class="k"> replace</span> 
export delimited using <span class="o">~/</span>documents<span class="o">/</span>github<span class="o">/</span>work<span class="o">/</span>s0<span class="m">.</span>csv,<span class="k"> replace</span> 
<span class="k">matrix</span> beta =<span class="k"> e</span>(b)
<span class="k">svmat</span> beta 
<span class="k">keep</span> beta<span class="o">*</span>
<span class="k">drop if</span> <span class="nf">missing</span>(beta1)
<span class="c1">//betas</span>
<span class="k">list</span> 
<span class="k">save</span> b<span class="m">.</span>dta,<span class="k"> replace</span> 
export delimited using <span class="o">~/</span>documents<span class="o">/</span>github<span class="o">/</span>work<span class="o">/</span>b<span class="m">.</span>csv,<span class="k"> replace</span> 
<span class="k">log close</span> 
<span class="c1">//noi ls</span>
} 
 
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>        Failure _d: rSMGJcEdF_d==2
  Analysis time _t: (rSMGJcEdF_tT-origin)/365.25
            Origin: time rSMGJcEdF_t0

Iteration 0:  Log likelihood = -54332.522
Iteration 1:  Log likelihood =  -52993.14
Iteration 2:  Log likelihood = -51472.516
Iteration 3:  Log likelihood = -49543.907
Iteration 4:  Log likelihood =  -49520.68
Iteration 5:  Log likelihood = -49520.548
Iteration 6:  Log likelihood = -49520.548
Refining estimates:
Iteration 0:  Log likelihood = -49520.548

Cox regression with Breslow method for ties

No. of subjects =     113,657                          Number of obs = 113,657
No. of failures =       4,937
Time at risk    = 999,633.484
                                                       LR chi2(2)    = 9623.95
Log likelihood = -49520.548                            Prob &gt; chi2   =  0.0000

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P&gt;|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
        donor |
HealthyNon~r  |   4.341779   .2130915    29.92   0.000     3.943586    4.780178
NotSoHealt~r  |   26.88098   1.007964    87.78   0.000     24.97625    28.93096
-------------------------------------------------------------------------------

     +-------------------------------+
     |        s0          _t   donor |
     |-------------------------------|
  1. | .98566928   11.277207   Donor |
  2. | .99256749   6.8281999   Donor |
  3. | .99351642   6.1711157   Donor |
  4. | .99402483   5.6919918   Donor |
  5. | .98475171   11.816564   Donor |
     |-------------------------------|
  6. | .99934972   .90622861   Donor |
  7. | .98705221   10.472279   Donor |
  8. |  .9879412   9.8754278   Donor |
  9. | .98766713   10.064339   Donor |
 10. | .99994059   .08761123   Donor |
     +-------------------------------+
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="_images/jamascript.png" /></p>
<p><a class="reference external" href="https://abikesa.github.io/flow/_downloads/57876abeb3d25f47b41ed9b178f3d2c7/jamascript-m.pdf">Segev, JAMA, 2010</a>:</p>
<ul class="simple">
<li><p>Page 961</p></li>
<li><p>5-year followup: <span class="math notranslate nohighlight">\(0.4%\)</span></p></li>
<li><p>12-year follow-up: <span class="math notranslate nohighlight">\(1.5%\)</span></p></li>
</ul>
</section>
<section id="semiparametric">
<h2>Semiparametric<a class="headerlink" href="#semiparametric" title="Permalink to this heading">#</a></h2>
<p><span class="math notranslate nohighlight">\(Y = \beta_0 + \beta_1X_1 + \beta_2X_2 + \cdots + \beta_NX_N + \epsilon_i\)</span></p>
<p><span class="math notranslate nohighlight">\(\begin{bmatrix}
\beta_0 \\
\beta_1 \\
\beta_2 \\
\vdots \\
\beta_N
\end{bmatrix}\)</span></p>
<p>Where <span class="math notranslate nohighlight">\(X_1\)</span> is Age, <span class="math notranslate nohighlight">\(X_2\)</span> is Female, and <span class="math notranslate nohighlight">\(+ \cdots + \beta_NX_N\)</span> are Race categories</p>
<p>The <span class="math notranslate nohighlight">\(\beta_i\)</span> coeffients can be found <a class="reference external" href="https://abikesa.github.io/flow/_downloads/b57ad99810799d0be5a9e18f54115561/b.csv">here</a></p>
<p>And the nonparametric base-case survival function can be found <a class="reference external" href="https://abikesa.github.io/flow/_downloads/9c26f2afd014707dc60aefc8facbf60d/s0.csv">here</a></p>
<p><a class="reference external" href="https://github.com/abikesa/flow/raw/main/jamascript-m.pdf"></a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "stata"
        },
        kernelOptions: {
            name: "stata",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'stata'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="abikesa_python.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"></p>
      </div>
    </a>
    <a class="right-next"
       href="act_0/act_0_0/act_0_0_0/act_0_0_0_1.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Prescriptions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#stata">Stata</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-i-basic">Stata I (Basic)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-ii-intermediate">Stata II (Intermediate)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-iii-advanced">Stata III (Advanced)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#just-scored-a-victory-that-carries-profound-implications-for-stata-iii-advanced">Just scored a victory that carries profound implications for “Stata III (Advanced)”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nonparametric">Nonparametric</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#semiparametric">Semiparametric</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By ADM
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>